<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>本地映射地址配置</title>

    <!-- js -->
    <#include "/admin/common/script.html">
    <!-- css -->
    <#include "/admin/common/style.html">

    <style rel="stylesheet" type="text/css">
        .layui-elem-quote p{
            font-size: 15px;
            letter-spacing: 2px;
            line-height: 2;
        }
    </style>
</head>
<body>

<!-- head -->
<#include "/admin/common/head.html">

<div class="layui-main site-inline main_panel">

    <!-- 左侧菜单栏 -->
    <#include "/admin/common/menu_tree.html">

    <div class="site-content">
        <table id="table-content" lay-filter="table-filter"></table>
    </div>
</div>

<!-- footer -->
<#include "/admin/common/footer.html">

</body>
<script type="text/javascript">
    var table = layui.table;
    layui.use('table', function(){

        //第一个实例
        table.render({
            elem: '#table-content',
            url: gateway + application_name_resource + '/admin/local/list.html',
            page: {
                layout: ['count', 'prev', 'page', 'next', 'limit', 'refresh', 'skip']//自定义分页布局
                ,limits:[5,10,15]
                ,first: false //不显示首页
                ,last: false //不显示尾页
            },
            limit: 5,
            request: {
                pageName: "pageNumber",
                limitName: "pageSize"
            },
            response: {
                statusName: "code",
                statusCode: "200",
                msgName: "message",
                countName: "count",
                dataName: "pageData"
            },
            title: "本地配置列表",
            toolbar: 'default',
            cols: [[
                {field: 'id', title: 'ID', width: '10%', sort: true, fixed: 'left'}
                ,{field: 'configName', title: '配置名称', width: '10%'}
                ,{field: 'lmLocationPath', title: 'linux或Mac-本地地址', width: '30%', sort: true}
                ,{field: 'wdLocationPath', title: 'windows-本地地址', width: '30%'}
                ,{fixed: 'right', title:'操作', width: '20%', align:'center', toolbar: '#tableTrToolBar'}
            ]]
        });
    });

    //监听工具条
    //注：tool 是工具条事件名，table-filter 是 table 原始容器的属性 lay-filter="对应的值"
    table.on('tool(table-filter)', function(obj){
        //获得当前行数据
        var data = obj.data;
        //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
        var layEvent = obj.event;
        //获得当前行 tr 的 DOM 对象（如果有的话）
        var tr = obj.tr;

        if(layEvent === 'detail'){
            //查看
            layer.msg("查看");
            //do somehing
        } else if(layEvent === 'del'){
            //删除
            layer.confirm('真的删除行么', function(index){
                obj.del(); //删除对应行（tr）的DOM结构，并更新缓存
                layer.close(index);
                //向服务端发送删除指令
            });
        } else if(layEvent === 'edit'){
            //编辑
            layer.msg("编辑");
            //do something

            //同步更新缓存对应的值
            obj.update({
                username: '123'
                ,title: 'xxx'
            });
        } else if(layEvent === 'LAYTABLE_TIPS'){
            layer.alert('Hi，头部工具栏扩展的右侧图标。');
        }
    });

</script>
<script type="text/html" id="tableTrToolBar">
    <a class="layui-btn layui-btn-xs" lay-event="detail">查看</a>
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
</html>